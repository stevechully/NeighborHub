{"ast":null,"code":"var _jsxFileName = \"/home/steve/amala/client/src/auth/RequireAuth.js\",\n  _s = $RefreshSig$();\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RequireAuth({\n  children\n}) {\n  _s();\n  const {\n    user,\n    profile,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // 1. Still checking session? Show loader.\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 50,\n        textAlign: 'center'\n      },\n      children: \"Loading application...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 2. No User? Go to login.\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 3. User exists, but Profile failed to load? \n  // This prevents the \"White Screen\" crash where code tries to access profile.roles\n  if (!profile) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 50,\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Profile Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"We could not load your profile data. Please contact support.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 4. All good? Render the page.\n  return children;\n}\n_s(RequireAuth, \"lSDzcenYjlEitYiT//XxrUxtOEU=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RequireAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","RequireAuth","children","_s","user","profile","loading","location","style","padding","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","onClick","window","reload","_c","$RefreshReg$"],"sources":["/home/steve/amala/client/src/auth/RequireAuth.js"],"sourcesContent":["import { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\n\nexport default function RequireAuth({ children }) {\n  const { user, profile, loading } = useAuth();\n  const location = useLocation();\n\n  // 1. Still checking session? Show loader.\n  if (loading) {\n    return <div style={{ padding: 50, textAlign: 'center' }}>Loading application...</div>;\n  }\n\n  // 2. No User? Go to login.\n  if (!user) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // 3. User exists, but Profile failed to load? \n  // This prevents the \"White Screen\" crash where code tries to access profile.roles\n  if (!profile) {\n    return (\n      <div style={{ padding: 50, textAlign: \"center\" }}>\n        <h3>Profile Error</h3>\n        <p>We could not load your profile data. Please contact support.</p>\n        <button onClick={() => window.location.reload()}>Retry</button>\n      </div>\n    );\n  }\n\n  // 4. All good? Render the page.\n  return children;\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,eAAe,SAASC,WAAWA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAChD,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAQ,CAAC,GAAGR,OAAO,CAAC,CAAC;EAC5C,MAAMS,QAAQ,GAAGV,WAAW,CAAC,CAAC;;EAE9B;EACA,IAAIS,OAAO,EAAE;IACX,oBAAON,OAAA;MAAKQ,KAAK,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,SAAS,EAAE;MAAS,CAAE;MAAAR,QAAA,EAAC;IAAsB;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACvF;;EAEA;EACA,IAAI,CAACV,IAAI,EAAE;IACT,oBAAOJ,OAAA,CAACJ,QAAQ;MAACmB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEV;MAAS,CAAE;MAACW,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACA;EACA,IAAI,CAACT,OAAO,EAAE;IACZ,oBACEL,OAAA;MAAKQ,KAAK,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,SAAS,EAAE;MAAS,CAAE;MAAAR,QAAA,gBAC/CF,OAAA;QAAAE,QAAA,EAAI;MAAa;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACtBd,OAAA;QAAAE,QAAA,EAAG;MAA4D;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACnEd,OAAA;QAAQmB,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACb,QAAQ,CAACc,MAAM,CAAC,CAAE;QAAAnB,QAAA,EAAC;MAAK;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5D,CAAC;EAEV;;EAEA;EACA,OAAOZ,QAAQ;AACjB;AAACC,EAAA,CA5BuBF,WAAW;EAAA,QACEH,OAAO,EACzBD,WAAW;AAAA;AAAAyB,EAAA,GAFNrB,WAAW;AAAA,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}