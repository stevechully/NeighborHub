{"ast":null,"code":"import { apiFetch } from \"./client\";\n\n/**\n * GET /api/facilities\n * All roles can view facilities (Filtered by is_active in backend)\n */\nexport function fetchFacilities() {\n  return apiFetch(\"/api/facilities\");\n}\n\n/**\n * POST /api/facilities\n * Admin creates a facility\n */\nexport function createFacility(payload) {\n  return apiFetch(\"/api/facilities\", {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\n/**\n * PUT /api/facilities/:id\n * Admin updates a facility\n */\nexport function updateFacility(facilityId, payload) {\n  return apiFetch(`/api/facilities/${facilityId}`, {\n    method: \"PUT\",\n    body: JSON.stringify(payload)\n  });\n}\n\n/**\n * PATCH /api/facilities/:id/deactivate\n * Admin deactivates a facility\n */\nexport function deactivateFacility(facilityId) {\n  return apiFetch(`/api/facilities/${facilityId}/deactivate`, {\n    method: \"PATCH\"\n  });\n}\n\n/**\n * POST /api/facilities/:id/book\n * Resident books a facility\n */\nexport function bookFacility(facilityId, payload) {\n  return apiFetch(`/api/facilities/${facilityId}/book`, {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\n/**\n * GET /api/facilities/bookings\n * Admin/General fetch of all bookings\n */\nexport function fetchFacilityBookings() {\n  return apiFetch(\"/api/facilities/bookings\");\n}\n\n/**\n * ✅ NEW: GET /api/facilities/my-bookings\n * Resident-specific booking fetch\n */\nexport function fetchMyFacilityBookings() {\n  return apiFetch(\"/api/facilities/my-bookings\");\n}\n\n/**\n * PATCH /api/facilities/bookings/:id\n * Admin ONLY generic status update (Approvals)\n */\nexport function updateFacilityBookingStatus(bookingId, status) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}`, {\n    method: \"PATCH\",\n    body: JSON.stringify({\n      status\n    })\n  });\n}\n\n/**\n * ✅ NEW: PATCH /api/facilities/bookings/:id/cancel\n * Logic for BOTH Residents and Admins to cancel\n */\nexport function cancelFacilityBooking(bookingId) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}/cancel`, {\n    method: \"PATCH\"\n  });\n}\n\n/**\n * POST /api/facilities/bookings/:id/pay\n */\nexport function payForFacilityBooking(bookingId, payment_method) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}/pay`, {\n    method: \"POST\",\n    body: JSON.stringify({\n      payment_method\n    })\n  });\n}\n\n/**\n * ✅ NEW: POST /api/refunds/facility/request\n * Resident requests a refund for a specific payment\n */\nexport function requestFacilityRefund(paymentId, reason = \"Resident request\") {\n  return apiFetch(\"/api/refunds/facility/request\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      payment_id: paymentId,\n      reason\n    })\n  });\n}\n\n/**\n * GET /api/facilities/:id/bookings?date=YYYY-MM-DD\n */\nexport function fetchFacilityBookingsByDate(facilityId, date) {\n  return apiFetch(`/api/facilities/${facilityId}/bookings?date=${date}`);\n}","map":{"version":3,"names":["apiFetch","fetchFacilities","createFacility","payload","method","body","JSON","stringify","updateFacility","facilityId","deactivateFacility","bookFacility","fetchFacilityBookings","fetchMyFacilityBookings","updateFacilityBookingStatus","bookingId","status","cancelFacilityBooking","payForFacilityBooking","payment_method","requestFacilityRefund","paymentId","reason","payment_id","fetchFacilityBookingsByDate","date"],"sources":["/home/steve/amala/client/src/api/facilities.api.js"],"sourcesContent":["import { apiFetch } from \"./client\";\n\n/**\n * GET /api/facilities\n * All roles can view facilities (Filtered by is_active in backend)\n */\nexport function fetchFacilities() {\n  return apiFetch(\"/api/facilities\");\n}\n\n/**\n * POST /api/facilities\n * Admin creates a facility\n */\nexport function createFacility(payload) {\n  return apiFetch(\"/api/facilities\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * PUT /api/facilities/:id\n * Admin updates a facility\n */\nexport function updateFacility(facilityId, payload) {\n  return apiFetch(`/api/facilities/${facilityId}`, {\n    method: \"PUT\",\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * PATCH /api/facilities/:id/deactivate\n * Admin deactivates a facility\n */\nexport function deactivateFacility(facilityId) {\n  return apiFetch(`/api/facilities/${facilityId}/deactivate`, {\n    method: \"PATCH\",\n  });\n}\n\n/**\n * POST /api/facilities/:id/book\n * Resident books a facility\n */\nexport function bookFacility(facilityId, payload) {\n  return apiFetch(`/api/facilities/${facilityId}/book`, {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * GET /api/facilities/bookings\n * Admin/General fetch of all bookings\n */\nexport function fetchFacilityBookings() {\n  return apiFetch(\"/api/facilities/bookings\");\n}\n\n/**\n * ✅ NEW: GET /api/facilities/my-bookings\n * Resident-specific booking fetch\n */\nexport function fetchMyFacilityBookings() {\n  return apiFetch(\"/api/facilities/my-bookings\");\n}\n\n/**\n * PATCH /api/facilities/bookings/:id\n * Admin ONLY generic status update (Approvals)\n */\nexport function updateFacilityBookingStatus(bookingId, status) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ status }),\n  });\n}\n\n/**\n * ✅ NEW: PATCH /api/facilities/bookings/:id/cancel\n * Logic for BOTH Residents and Admins to cancel\n */\nexport function cancelFacilityBooking(bookingId) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}/cancel`, {\n    method: \"PATCH\",\n  });\n}\n\n/**\n * POST /api/facilities/bookings/:id/pay\n */\nexport function payForFacilityBooking(bookingId, payment_method) {\n  return apiFetch(`/api/facilities/bookings/${bookingId}/pay`, {\n    method: \"POST\",\n    body: JSON.stringify({ payment_method }),\n  });\n}\n\n/**\n * ✅ NEW: POST /api/refunds/facility/request\n * Resident requests a refund for a specific payment\n */\nexport function requestFacilityRefund(paymentId, reason = \"Resident request\") {\n  return apiFetch(\"/api/refunds/facility/request\", {\n    method: \"POST\",\n    body: JSON.stringify({ payment_id: paymentId, reason }),\n  });\n}\n\n/**\n * GET /api/facilities/:id/bookings?date=YYYY-MM-DD\n */\nexport function fetchFacilityBookingsByDate(facilityId, date) {\n  return apiFetch(`/api/facilities/${facilityId}/bookings?date=${date}`);\n}"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,UAAU;;AAEnC;AACA;AACA;AACA;AACA,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChC,OAAOD,QAAQ,CAAC,iBAAiB,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASE,cAAcA,CAACC,OAAO,EAAE;EACtC,OAAOH,QAAQ,CAAC,iBAAiB,EAAE;IACjCI,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO;EAC9B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASK,cAAcA,CAACC,UAAU,EAAEN,OAAO,EAAE;EAClD,OAAOH,QAAQ,CAAC,mBAAmBS,UAAU,EAAE,EAAE;IAC/CL,MAAM,EAAE,KAAK;IACbC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO;EAC9B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASO,kBAAkBA,CAACD,UAAU,EAAE;EAC7C,OAAOT,QAAQ,CAAC,mBAAmBS,UAAU,aAAa,EAAE;IAC1DL,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASO,YAAYA,CAACF,UAAU,EAAEN,OAAO,EAAE;EAChD,OAAOH,QAAQ,CAAC,mBAAmBS,UAAU,OAAO,EAAE;IACpDL,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO;EAC9B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASS,qBAAqBA,CAAA,EAAG;EACtC,OAAOZ,QAAQ,CAAC,0BAA0B,CAAC;AAC7C;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASa,uBAAuBA,CAAA,EAAG;EACxC,OAAOb,QAAQ,CAAC,6BAA6B,CAAC;AAChD;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASc,2BAA2BA,CAACC,SAAS,EAAEC,MAAM,EAAE;EAC7D,OAAOhB,QAAQ,CAAC,4BAA4Be,SAAS,EAAE,EAAE;IACvDX,MAAM,EAAE,OAAO;IACfC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAES;IAAO,CAAC;EACjC,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAqBA,CAACF,SAAS,EAAE;EAC/C,OAAOf,QAAQ,CAAC,4BAA4Be,SAAS,SAAS,EAAE;IAC9DX,MAAM,EAAE;EACV,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,SAASc,qBAAqBA,CAACH,SAAS,EAAEI,cAAc,EAAE;EAC/D,OAAOnB,QAAQ,CAAC,4BAA4Be,SAAS,MAAM,EAAE;IAC3DX,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEY;IAAe,CAAC;EACzC,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAqBA,CAACC,SAAS,EAAEC,MAAM,GAAG,kBAAkB,EAAE;EAC5E,OAAOtB,QAAQ,CAAC,+BAA+B,EAAE;IAC/CI,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEgB,UAAU,EAAEF,SAAS;MAAEC;IAAO,CAAC;EACxD,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA,OAAO,SAASE,2BAA2BA,CAACf,UAAU,EAAEgB,IAAI,EAAE;EAC5D,OAAOzB,QAAQ,CAAC,mBAAmBS,UAAU,kBAAkBgB,IAAI,EAAE,CAAC;AACxE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}