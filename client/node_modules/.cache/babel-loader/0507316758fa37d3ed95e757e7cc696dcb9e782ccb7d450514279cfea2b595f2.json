{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { supabase } from \"../lib/supabase\"; // âœ… make sure this path is correct\n\nexport default function useParcelNotifications(userId, onNewParcel) {\n  _s();\n  useEffect(() => {\n    if (!userId) return;\n    console.log(\"ðŸ“¡ Parcel realtime listener started for:\", userId);\n    const channel = supabase.channel(\"parcel-notifications\").on(\"postgres_changes\", {\n      event: \"INSERT\",\n      schema: \"public\",\n      table: \"parcels\",\n      filter: `resident_id=eq.${userId}`\n    }, payload => {\n      console.log(\"ðŸ“¦ New parcel received realtime:\", payload.new);\n      if (onNewParcel) onNewParcel(payload.new);\n    }).subscribe(status => {\n      console.log(\"ðŸ“¡ Parcel channel status:\", status);\n    });\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [userId, onNewParcel]);\n}\n_s(useParcelNotifications, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["useEffect","supabase","useParcelNotifications","userId","onNewParcel","_s","console","log","channel","on","event","schema","table","filter","payload","new","subscribe","status","removeChannel"],"sources":["/home/steve/amala/client/src/hooks/useParcelNotifications.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { supabase } from \"../lib/supabase\"; // âœ… make sure this path is correct\n\nexport default function useParcelNotifications(userId, onNewParcel) {\n  useEffect(() => {\n    if (!userId) return;\n\n    console.log(\"ðŸ“¡ Parcel realtime listener started for:\", userId);\n\n    const channel = supabase\n      .channel(\"parcel-notifications\")\n      .on(\n        \"postgres_changes\",\n        {\n          event: \"INSERT\",\n          schema: \"public\",\n          table: \"parcels\",\n          filter: `resident_id=eq.${userId}`,\n        },\n        (payload) => {\n          console.log(\"ðŸ“¦ New parcel received realtime:\", payload.new);\n          if (onNewParcel) onNewParcel(payload.new);\n        }\n      )\n      .subscribe((status) => {\n        console.log(\"ðŸ“¡ Parcel channel status:\", status);\n      });\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [userId, onNewParcel]);\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,QAAQ,QAAQ,iBAAiB,CAAC,CAAC;;AAE5C,eAAe,SAASC,sBAAsBA,CAACC,MAAM,EAAEC,WAAW,EAAE;EAAAC,EAAA;EAClEL,SAAS,CAAC,MAAM;IACd,IAAI,CAACG,MAAM,EAAE;IAEbG,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEJ,MAAM,CAAC;IAE/D,MAAMK,OAAO,GAAGP,QAAQ,CACrBO,OAAO,CAAC,sBAAsB,CAAC,CAC/BC,EAAE,CACD,kBAAkB,EAClB;MACEC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE,QAAQ;MAChBC,KAAK,EAAE,SAAS;MAChBC,MAAM,EAAE,kBAAkBV,MAAM;IAClC,CAAC,EACAW,OAAO,IAAK;MACXR,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEO,OAAO,CAACC,GAAG,CAAC;MAC5D,IAAIX,WAAW,EAAEA,WAAW,CAACU,OAAO,CAACC,GAAG,CAAC;IAC3C,CACF,CAAC,CACAC,SAAS,CAAEC,MAAM,IAAK;MACrBX,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEU,MAAM,CAAC;IAClD,CAAC,CAAC;IAEJ,OAAO,MAAM;MACXhB,QAAQ,CAACiB,aAAa,CAACV,OAAO,CAAC;IACjC,CAAC;EACH,CAAC,EAAE,CAACL,MAAM,EAAEC,WAAW,CAAC,CAAC;AAC3B;AAACC,EAAA,CA7BuBH,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}