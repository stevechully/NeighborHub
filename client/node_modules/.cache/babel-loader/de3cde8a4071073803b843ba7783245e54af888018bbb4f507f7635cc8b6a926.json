{"ast":null,"code":"import{useAuth}from\"../auth/AuthContext\";import{supabase}from\"../lib/supabase\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Navbar(){const{profile}=useAuth();const navigate=useNavigate();async function handleLogout(){try{await supabase.auth.signOut();}catch(err){console.error(\"Logout error:\",err.message);}finally{// ✅ Remove only supabase keys (safe)\nObject.keys(localStorage).forEach(key=>{if(key.startsWith(\"sb-\"))localStorage.removeItem(key);});navigate(\"/login\");}}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:12,background:\"#fff\",marginBottom:16},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Resident Portal\"}),/*#__PURE__*/_jsxs(\"span\",{style:{float:\"right\",display:\"flex\",gap:12},children:[/*#__PURE__*/_jsx(\"span\",{children:profile===null||profile===void 0?void 0:profile.full_name}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]})]});}","map":{"version":3,"names":["useAuth","supabase","useNavigate","jsx","_jsx","jsxs","_jsxs","Navbar","profile","navigate","handleLogout","auth","signOut","err","console","error","message","Object","keys","localStorage","forEach","key","startsWith","removeItem","style","padding","background","marginBottom","children","float","display","gap","full_name","onClick"],"sources":["/home/steve/amala/client/src/components/Navbar.js"],"sourcesContent":["import { useAuth } from \"../auth/AuthContext\";\nimport { supabase } from \"../lib/supabase\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Navbar() {\n  const { profile } = useAuth();\n  const navigate = useNavigate();\n\n  async function handleLogout() {\n    try {\n      await supabase.auth.signOut();\n    } catch (err) {\n      console.error(\"Logout error:\", err.message);\n    } finally {\n      // ✅ Remove only supabase keys (safe)\n      Object.keys(localStorage).forEach((key) => {\n        if (key.startsWith(\"sb-\")) localStorage.removeItem(key);\n      });\n\n      navigate(\"/login\");\n    }\n  }\n\n  return (\n    <div style={{ padding: 12, background: \"#fff\", marginBottom: 16 }}>\n      <strong>Resident Portal</strong>\n\n      <span style={{ float: \"right\", display: \"flex\", gap: 12 }}>\n        <span>{profile?.full_name}</span>\n        <button onClick={handleLogout}>Logout</button>\n      </span>\n    </div>\n  );\n}\n"],"mappings":"AAAA,OAASA,OAAO,KAAQ,qBAAqB,CAC7C,OAASC,QAAQ,KAAQ,iBAAiB,CAC1C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAG,CAC/B,KAAM,CAAEC,OAAQ,CAAC,CAAGR,OAAO,CAAC,CAAC,CAC7B,KAAM,CAAAS,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9B,cAAe,CAAAQ,YAAYA,CAAA,CAAG,CAC5B,GAAI,CACF,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAACC,OAAO,CAAC,CAAC,CAC/B,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,eAAe,CAAEF,GAAG,CAACG,OAAO,CAAC,CAC7C,CAAC,OAAS,CACR;AACAC,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,CAACC,OAAO,CAAEC,GAAG,EAAK,CACzC,GAAIA,GAAG,CAACC,UAAU,CAAC,KAAK,CAAC,CAAEH,YAAY,CAACI,UAAU,CAACF,GAAG,CAAC,CACzD,CAAC,CAAC,CAEFZ,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAEA,mBACEH,KAAA,QAAKkB,KAAK,CAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,UAAU,CAAE,MAAM,CAAEC,YAAY,CAAE,EAAG,CAAE,CAAAC,QAAA,eAChExB,IAAA,WAAAwB,QAAA,CAAQ,iBAAe,CAAQ,CAAC,cAEhCtB,KAAA,SAAMkB,KAAK,CAAE,CAAEK,KAAK,CAAE,OAAO,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,EAAG,CAAE,CAAAH,QAAA,eACxDxB,IAAA,SAAAwB,QAAA,CAAOpB,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEwB,SAAS,CAAO,CAAC,cACjC5B,IAAA,WAAQ6B,OAAO,CAAEvB,YAAa,CAAAkB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC1C,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}