{"ast":null,"code":"import _objectSpread from\"/home/steve/amala/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{supabase}from\"../../lib/supabase\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;function AdminFacilities(){const[facilities,setFacilities]=useState([]);const[form,setForm]=useState({name:\"\",description:\"\",capacity:\"\",is_paid:false,fee:\"\",open_time:\"\",close_time:\"\",slot_duration_minutes:60});useEffect(()=>{fetchFacilities();},[]);const fetchFacilities=async()=>{const{data:{session}}=await supabase.auth.getSession();const res=await axios.get(\"\".concat(BACKEND_URL,\"/facilities\"),{headers:{Authorization:\"Bearer \".concat(session.access_token)}});setFacilities(res.data);};const handleCreate=async()=>{const{data:{session}}=await supabase.auth.getSession();await axios.post(\"\".concat(BACKEND_URL,\"/facilities\"),form,{headers:{Authorization:\"Bearer \".concat(session.access_token)}});alert(\"Facility created!\");fetchFacilities();};const deactivateFacility=async id=>{const{data:{session}}=await supabase.auth.getSession();await axios.patch(\"\".concat(BACKEND_URL,\"/facilities/\").concat(id,\"/deactivate\"),{},{headers:{Authorization:\"Bearer \".concat(session.access_token)}});fetchFacilities();};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Facility Management\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"30px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Facility\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{description:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Capacity\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{capacity:e.target.value}))}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Paid?\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{is_paid:e.target.checked}))})]}),form.is_paid&&/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Fee\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{fee:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{open_time:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{close_time:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Slot Duration (minutes)\",onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{slot_duration_minutes:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreate,children:\"Create Facility\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Existing Facilities\"}),facilities.map(facility=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #ccc\",marginBottom:\"10px\",padding:\"10px\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:facility.name}),/*#__PURE__*/_jsxs(\"p\",{children:[facility.open_time,\" - \",facility.close_time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Slot: \",facility.slot_duration_minutes,\" mins\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",facility.is_active?\"Active\":\"Inactive\"]}),facility.is_active&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deactivateFacility(facility.id),children:\"Deactivate\"})]},facility.id))]});}export default AdminFacilities;","map":{"version":3,"names":["React","useEffect","useState","axios","supabase","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","AdminFacilities","facilities","setFacilities","form","setForm","name","description","capacity","is_paid","fee","open_time","close_time","slot_duration_minutes","fetchFacilities","data","session","auth","getSession","res","get","concat","headers","Authorization","access_token","handleCreate","post","alert","deactivateFacility","id","patch","style","padding","children","marginBottom","placeholder","onChange","e","_objectSpread","target","value","type","checked","onClick","map","facility","border","is_active"],"sources":["/home/steve/amala/client/src/pages/admin/AdminFacilities.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { supabase } from \"../../lib/supabase\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\n\nfunction AdminFacilities() {\n  const [facilities, setFacilities] = useState([]);\n  const [form, setForm] = useState({\n    name: \"\",\n    description: \"\",\n    capacity: \"\",\n    is_paid: false,\n    fee: \"\",\n    open_time: \"\",\n    close_time: \"\",\n    slot_duration_minutes: 60\n  });\n\n  useEffect(() => {\n    fetchFacilities();\n  }, []);\n\n  const fetchFacilities = async () => {\n    const {\n      data: { session }\n    } = await supabase.auth.getSession();\n\n    const res = await axios.get(`${BACKEND_URL}/facilities`, {\n      headers: { Authorization: `Bearer ${session.access_token}` }\n    });\n\n    setFacilities(res.data);\n  };\n\n  const handleCreate = async () => {\n    const {\n      data: { session }\n    } = await supabase.auth.getSession();\n\n    await axios.post(`${BACKEND_URL}/facilities`, form, {\n      headers: { Authorization: `Bearer ${session.access_token}` }\n    });\n\n    alert(\"Facility created!\");\n    fetchFacilities();\n  };\n\n  const deactivateFacility = async (id) => {\n    const {\n      data: { session }\n    } = await supabase.auth.getSession();\n\n    await axios.patch(\n      `${BACKEND_URL}/facilities/${id}/deactivate`,\n      {},\n      { headers: { Authorization: `Bearer ${session.access_token}` } }\n    );\n\n    fetchFacilities();\n  };\n\n  return (\n    <div style={{ padding: \"20px\" }}>\n      <h2>Admin Facility Management</h2>\n\n      {/* Create Facility Form */}\n      <div style={{ marginBottom: \"30px\" }}>\n        <h3>Create New Facility</h3>\n\n        <input\n          placeholder=\"Name\"\n          onChange={(e) => setForm({ ...form, name: e.target.value })}\n        />\n        <input\n          placeholder=\"Description\"\n          onChange={(e) => setForm({ ...form, description: e.target.value })}\n        />\n        <input\n          type=\"number\"\n          placeholder=\"Capacity\"\n          onChange={(e) => setForm({ ...form, capacity: e.target.value })}\n        />\n\n        <label>\n          Paid?\n          <input\n            type=\"checkbox\"\n            onChange={(e) =>\n              setForm({ ...form, is_paid: e.target.checked })\n            }\n          />\n        </label>\n\n        {form.is_paid && (\n          <input\n            type=\"number\"\n            placeholder=\"Fee\"\n            onChange={(e) => setForm({ ...form, fee: e.target.value })}\n          />\n        )}\n\n        <input\n          type=\"time\"\n          onChange={(e) => setForm({ ...form, open_time: e.target.value })}\n        />\n\n        <input\n          type=\"time\"\n          onChange={(e) => setForm({ ...form, close_time: e.target.value })}\n        />\n\n        <input\n          type=\"number\"\n          placeholder=\"Slot Duration (minutes)\"\n          onChange={(e) =>\n            setForm({\n              ...form,\n              slot_duration_minutes: e.target.value\n            })\n          }\n        />\n\n        <button onClick={handleCreate}>Create Facility</button>\n      </div>\n\n      {/* Facility List */}\n      <h3>Existing Facilities</h3>\n\n      {facilities.map((facility) => (\n        <div\n          key={facility.id}\n          style={{\n            border: \"1px solid #ccc\",\n            marginBottom: \"10px\",\n            padding: \"10px\"\n          }}\n        >\n          <strong>{facility.name}</strong>\n          <p>\n            {facility.open_time} - {facility.close_time}\n          </p>\n          <p>Slot: {facility.slot_duration_minutes} mins</p>\n          <p>Status: {facility.is_active ? \"Active\" : \"Inactive\"}</p>\n\n          {facility.is_active && (\n            <button onClick={() => deactivateFacility(facility.id)}>\n              Deactivate\n            </button>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default AdminFacilities;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}