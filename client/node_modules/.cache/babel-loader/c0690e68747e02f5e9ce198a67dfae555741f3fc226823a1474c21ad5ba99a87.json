{"ast":null,"code":"import{useEffect,useState,useCallback}from\"react\";import{useAuth}from\"../../auth/AuthContext\";import{fetchVisitors,createVisitor,markVisitorExit,fetchParcels,createParcel,markParcelPickedUp}from\"../../api/visitorParcel.api\";import{fetchResidents}from\"../../api/admin.api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GateManagementPage(){var _profile$roles,_profile$user_roles;const{profile,loading:authLoading}=useAuth();const[visitors,setVisitors]=useState([]);const[parcels,setParcels]=useState([]);const[loading,setLoading]=useState(true);const[residents,setResidents]=useState([]);const[vName,setVName]=useState(\"\");const[vPurpose,setVPurpose]=useState(\"\");const[vResId,setVResId]=useState(\"\");const[pCourier,setPCourier]=useState(\"\");const[pTracking,setPTracking]=useState(\"\");const[pResId,setPResId]=useState(\"\");const roleName=(profile===null||profile===void 0?void 0:(_profile$roles=profile.roles)===null||_profile$roles===void 0?void 0:_profile$roles.name)||(profile===null||profile===void 0?void 0:profile.role)||(profile===null||profile===void 0?void 0:(_profile$user_roles=profile.user_roles)===null||_profile$user_roles===void 0?void 0:_profile$user_roles.role)||null;const isSecurity=roleName===\"SECURITY\"||roleName===\"ADMIN\";const loadData=useCallback(async()=>{try{setLoading(true);const[vData,pData]=await Promise.all([fetchVisitors(),fetchParcels()]);setVisitors(vData||[]);setParcels(pData||[]);}catch(err){console.error(\"âŒ Load Error:\",err.message);}finally{setLoading(false);}},[]);const loadResidents=useCallback(async()=>{if(!isSecurity)return;try{const data=await fetchResidents();setResidents(data||[]);}catch(err){console.error(\"âŒ Residents fetch failed:\",err.message);}},[isSecurity]);useEffect(()=>{if(!authLoading&&profile){loadData();loadResidents();}},[authLoading,profile,loadData,loadResidents]);// Handler: Visitor Entry\nconst handleVisitorEntry=async e=>{e.preventDefault();try{await createVisitor({visitor_name:vName,visitor_phone:\"\",purpose:vPurpose,resident_id:vResId});alert(\"Visitor Logged âœ…\");setVName(\"\");setVPurpose(\"\");setVResId(\"\");loadData();}catch(err){alert(err.message);}};// Handler: Parcel Entry\nconst handleParcelEntry=async e=>{e.preventDefault();try{await createParcel({courier_name:pCourier,tracking_number:pTracking,resident_id:pResId});alert(\"Parcel Logged âœ…\");setPCourier(\"\");setPTracking(\"\");setPResId(\"\");loadData();}catch(err){alert(err.message);}};console.log(\"RESIDENT parcels:\",parcels);// 1. First, wait for auth to finish\nif(authLoading)return/*#__PURE__*/_jsx(\"div\",{style:{padding:40},children:\"Verifying session...\"});// 2. âœ… STEP 1: RESTRICT ACCESS GUARD\n// If user is logged in but NOT Security/Admin, show Access Denied\nif(!isSecurity){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:40,textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDEAB Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{children:\"This page is reserved for Security and Admin personnel only.\"})]});}// 3. Render the full page for authorized users\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Gate Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadData,children:\"Refresh Data\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:20,marginBottom:30},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",padding:20,borderRadius:8,flex:1,boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Visitor Entry\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVisitorEntry,children:[/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Visitor Name\",value:vName,onChange:e=>setVName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Purpose (e.g. Delivery)\",value:vPurpose,onChange:e=>setVPurpose(e.target.value),required:true}),/*#__PURE__*/_jsxs(\"select\",{style:inputStyle,value:vResId,onChange:e=>setVResId(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Resident\"}),residents.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.id,children:r.full_name},r.id))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:btnStyle,children:\"Log Entry\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#fff\",padding:20,borderRadius:8,flex:1,boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"New Parcel Arrival\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleParcelEntry,children:[/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Courier (e.g. Amazon)\",value:pCourier,onChange:e=>setPCourier(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Tracking # (Optional)\",value:pTracking,onChange:e=>setPTracking(e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{style:inputStyle,value:pResId,onChange:e=>setPResId(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Resident\"}),residents.map(r=>/*#__PURE__*/_jsx(\"option\",{value:r.id,children:r.full_name},r.id))]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:btnStyle,children:\"Log Parcel\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:tableContainerStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Visitors\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Updating list...\"}):/*#__PURE__*/_jsxs(\"table\",{width:\"100%\",cellPadding:\"12\",style:tableStyle,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f8f9fa\"},children:[/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Visitor\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Purpose\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Entry\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Exit\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:visitors.map(v=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #eee\"},children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:v.visitor_name})}),/*#__PURE__*/_jsx(\"td\",{children:v.purpose}),/*#__PURE__*/_jsx(\"td\",{children:v.entry_time?new Date(v.entry_time).toLocaleString():\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:v.exit_time?new Date(v.exit_time).toLocaleString():\"Inside\"}),/*#__PURE__*/_jsx(\"td\",{children:!v.exit_time&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>markVisitorExit(v.id).then(loadData),children:\"Mark Exit\"})})]},v.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:tableContainerStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Parcels\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Updating list...\"}):/*#__PURE__*/_jsxs(\"table\",{width:\"100%\",cellPadding:\"12\",style:tableStyle,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f8f9fa\"},children:[/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Courier\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Received At\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:parcels.map(p=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #eee\"},children:[/*#__PURE__*/_jsxs(\"td\",{children:[p.courier_name,\" \",p.tracking_number&&\"(\".concat(p.tracking_number,\")\")]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{style:{color:p.status==='PICKED_UP'?'green':'orange'},children:p.status})}),/*#__PURE__*/_jsx(\"td\",{children:p.received_at?new Date(p.received_at).toLocaleString():\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:p.status===\"RECEIVED\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>markParcelPickedUp(p.id).then(loadData),children:\"Mark Picked Up\"})})]},p.id))})]})]})]});}const inputStyle={width:'100%',padding:'10px',marginBottom:'10px',borderRadius:'4px',border:'1px solid #ddd'};const btnStyle={width:'100%',padding:'10px',background:'#28a745',color:'#fff',border:'none',borderRadius:'4px',cursor:'pointer'};const tableContainerStyle={background:\"#fff\",padding:20,borderRadius:8,marginBottom:20,boxShadow:'0 2px 4px rgba(0,0,0,0.1)'};const tableStyle={borderCollapse:\"collapse\"};","map":{"version":3,"names":["useEffect","useState","useCallback","useAuth","fetchVisitors","createVisitor","markVisitorExit","fetchParcels","createParcel","markParcelPickedUp","fetchResidents","jsx","_jsx","jsxs","_jsxs","GateManagementPage","_profile$roles","_profile$user_roles","profile","loading","authLoading","visitors","setVisitors","parcels","setParcels","setLoading","residents","setResidents","vName","setVName","vPurpose","setVPurpose","vResId","setVResId","pCourier","setPCourier","pTracking","setPTracking","pResId","setPResId","roleName","roles","name","role","user_roles","isSecurity","loadData","vData","pData","Promise","all","err","console","error","message","loadResidents","data","handleVisitorEntry","e","preventDefault","visitor_name","visitor_phone","purpose","resident_id","alert","handleParcelEntry","courier_name","tracking_number","log","style","padding","children","textAlign","display","justifyContent","alignItems","onClick","gap","marginBottom","background","borderRadius","flex","boxShadow","onSubmit","inputStyle","placeholder","value","onChange","target","required","map","r","id","full_name","type","btnStyle","tableContainerStyle","width","cellPadding","tableStyle","align","v","borderBottom","entry_time","Date","toLocaleString","exit_time","then","p","concat","color","status","received_at","border","cursor","borderCollapse"],"sources":["/home/steve/amala/client/src/pages/gate/GateManagementPage.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport { useAuth } from \"../../auth/AuthContext\";\nimport { \n  fetchVisitors, createVisitor, markVisitorExit, \n  fetchParcels, createParcel, markParcelPickedUp \n} from \"../../api/visitorParcel.api\";\nimport { fetchResidents } from \"../../api/admin.api\"; \n\nexport default function GateManagementPage() {\n  const { profile, loading: authLoading } = useAuth();\n  \n  const [visitors, setVisitors] = useState([]);\n  const [parcels, setParcels] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [residents, setResidents] = useState([]);\n\n  const [vName, setVName] = useState(\"\");\n  const [vPurpose, setVPurpose] = useState(\"\");\n  const [vResId, setVResId] = useState(\"\"); \n  \n  const [pCourier, setPCourier] = useState(\"\");\n  const [pTracking, setPTracking] = useState(\"\");\n  const [pResId, setPResId] = useState(\"\");\n\n  const roleName = profile?.roles?.name || profile?.role || profile?.user_roles?.role || null;\n  const isSecurity = roleName === \"SECURITY\" || roleName === \"ADMIN\";\n\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [vData, pData] = await Promise.all([fetchVisitors(), fetchParcels()]);\n      setVisitors(vData || []);\n      setParcels(pData || []);\n    } catch (err) {\n      console.error(\"âŒ Load Error:\", err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const loadResidents = useCallback(async () => {\n    if (!isSecurity) return;\n    try {\n      const data = await fetchResidents();\n      setResidents(data || []);\n    } catch (err) {\n      console.error(\"âŒ Residents fetch failed:\", err.message);\n    }\n  }, [isSecurity]);\n\n  useEffect(() => {\n    if (!authLoading && profile) {\n      loadData();\n      loadResidents();\n    }\n  }, [authLoading, profile, loadData, loadResidents]);\n\n  // Handler: Visitor Entry\n  const handleVisitorEntry = async (e) => {\n    e.preventDefault();\n    try {\n      await createVisitor({ \n        visitor_name: vName, \n        visitor_phone: \"\", \n        purpose: vPurpose, \n        resident_id: vResId \n      });\n      alert(\"Visitor Logged âœ…\");\n      setVName(\"\"); setVPurpose(\"\"); setVResId(\"\");\n      loadData();\n    } catch (err) { alert(err.message); }\n  };\n\n  // Handler: Parcel Entry\n  const handleParcelEntry = async (e) => {\n    e.preventDefault();\n    try {\n      await createParcel({ \n        courier_name: pCourier, \n        tracking_number: pTracking, \n        resident_id: pResId \n      });\n      alert(\"Parcel Logged âœ…\");\n      setPCourier(\"\"); setPTracking(\"\"); setPResId(\"\");\n      loadData();\n    } catch (err) { alert(err.message); }\n  };\n  console.log(\"RESIDENT parcels:\", parcels);\n  // 1. First, wait for auth to finish\n  if (authLoading) return <div style={{ padding: 40 }}>Verifying session...</div>;\n\n  // 2. âœ… STEP 1: RESTRICT ACCESS GUARD\n  // If user is logged in but NOT Security/Admin, show Access Denied\n  if (!isSecurity) {\n    return (\n      <div style={{ padding: 40, textAlign: 'center' }}>\n        <h3>ðŸš« Access Denied</h3>\n        <p>This page is reserved for Security and Admin personnel only.</p>\n      </div>\n    );\n  }\n\n  // 3. Render the full page for authorized users\n  return (\n    <div style={{ padding: 20 }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <h2>Gate Management</h2>\n        <button onClick={loadData}>Refresh Data</button>\n      </div>\n\n      {/* --- FORMS (Security/Admin Only) --- */}\n      <div style={{ display: \"flex\", gap: 20, marginBottom: 30 }}>\n        <div style={{ background: \"#fff\", padding: 20, borderRadius: 8, flex: 1, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n          <h3>Visitor Entry</h3>\n          <form onSubmit={handleVisitorEntry}>\n            <input style={inputStyle} placeholder=\"Visitor Name\" value={vName} onChange={e => setVName(e.target.value)} required />\n            <input style={inputStyle} placeholder=\"Purpose (e.g. Delivery)\" value={vPurpose} onChange={e => setVPurpose(e.target.value)} required />\n            \n            <select\n              style={inputStyle}\n              value={vResId}\n              onChange={(e) => setVResId(e.target.value)}\n              required\n            >\n              <option value=\"\">Select Resident</option>\n              {residents.map((r) => (\n                <option key={r.id} value={r.id}>\n                  {r.full_name}\n                </option>\n              ))}\n            </select>\n\n            <button type=\"submit\" style={btnStyle}>Log Entry</button>\n          </form>\n        </div>\n\n        <div style={{ background: \"#fff\", padding: 20, borderRadius: 8, flex: 1, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n          <h3>New Parcel Arrival</h3>\n          <form onSubmit={handleParcelEntry}>\n            <input style={inputStyle} placeholder=\"Courier (e.g. Amazon)\" value={pCourier} onChange={e => setPCourier(e.target.value)} required />\n            <input style={inputStyle} placeholder=\"Tracking # (Optional)\" value={pTracking} onChange={e => setPTracking(e.target.value)} />\n            \n            <select\n              style={inputStyle}\n              value={pResId}\n              onChange={(e) => setPResId(e.target.value)}\n              required\n            >\n              <option value=\"\">Select Resident</option>\n              {residents.map((r) => (\n                <option key={r.id} value={r.id}>\n                  {r.full_name}\n                </option>\n              ))}\n            </select>\n\n            <button type=\"submit\" style={btnStyle}>Log Parcel</button>\n          </form>\n        </div>\n      </div>\n\n      {/* --- VISITORS TABLE --- */}\n      <div style={tableContainerStyle}>\n        <h3>Recent Visitors</h3>\n        {loading ? <p>Updating list...</p> : (\n          <table width=\"100%\" cellPadding=\"12\" style={tableStyle}>\n            <thead>\n              <tr style={{ background: \"#f8f9fa\" }}>\n                <th align=\"left\">Visitor</th><th align=\"left\">Purpose</th><th align=\"left\">Entry</th><th align=\"left\">Exit</th><th align=\"left\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {visitors.map(v => (\n                <tr key={v.id} style={{ borderBottom: \"1px solid #eee\" }}>\n                  <td><strong>{v.visitor_name}</strong></td>\n                  <td>{v.purpose}</td>\n                  <td>{v.entry_time ? new Date(v.entry_time).toLocaleString() : \"-\"}</td>\n                  <td>{v.exit_time ? new Date(v.exit_time).toLocaleString() : \"Inside\"}</td>\n                  <td>\n                    {!v.exit_time && (\n                      <button onClick={() => markVisitorExit(v.id).then(loadData)}>Mark Exit</button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      {/* --- PARCELS TABLE --- */}\n      <div style={tableContainerStyle}>\n        <h3>Parcels</h3>\n        {loading ? <p>Updating list...</p> : (\n          <table width=\"100%\" cellPadding=\"12\" style={tableStyle}>\n            <thead>\n              <tr style={{ background: \"#f8f9fa\" }}>\n                <th align=\"left\">Courier</th><th align=\"left\">Status</th><th align=\"left\">Received At</th><th align=\"left\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {parcels.map(p => (\n                <tr key={p.id} style={{ borderBottom: \"1px solid #eee\" }}>\n                  <td>{p.courier_name} {p.tracking_number && `(${p.tracking_number})`}</td>\n                  <td><span style={{ color: p.status === 'PICKED_UP' ? 'green' : 'orange' }}>{p.status}</span></td>\n                  <td>{p.received_at ? new Date(p.received_at).toLocaleString() : \"-\"}</td>\n                  <td>\n                    {p.status === \"RECEIVED\" && (\n                      <button onClick={() => markParcelPickedUp(p.id).then(loadData)}>Mark Picked Up</button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst inputStyle = { width: '100%', padding: '10px', marginBottom: '10px', borderRadius: '4px', border: '1px solid #ddd' };\nconst btnStyle = { width: '100%', padding: '10px', background: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' };\nconst tableContainerStyle = { background: \"#fff\", padding: 20, borderRadius: 8, marginBottom: 20, boxShadow: '0 2px 4px rgba(0,0,0,0.1)' };\nconst tableStyle = { borderCollapse: \"collapse\" };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}