{"ast":null,"code":"import _objectSpread from\"/home/steve/amala/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useMemo,useState,useCallback}from\"react\";import{useNavigate}from\"react-router-dom\";// ✅ Added import\nimport{useAuth}from\"../../auth/AuthContext\";import{fetchMarketplaceProducts,fetchAllMarketplaceProducts,approveMarketplaceProduct,createMarketplaceProduct,placeMarketplaceOrder,fetchMarketplaceOrders,// ✅ New imports for payments\nfetchMyMarketplacePayments,fetchAllMarketplacePayments,payMarketplaceOrder}from\"../../api/marketplace.api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MarketplacePage(){var _profile$roles,_profile$user_roles;const{profile,loading:authLoading}=useAuth();const navigate=useNavigate();// ✅ Init navigate\nconst roleName=(profile===null||profile===void 0?void 0:(_profile$roles=profile.roles)===null||_profile$roles===void 0?void 0:_profile$roles.name)||(profile===null||profile===void 0?void 0:profile.role)||(profile===null||profile===void 0?void 0:(_profile$user_roles=profile.user_roles)===null||_profile$user_roles===void 0?void 0:_profile$user_roles.role)||null;const isAdmin=roleName===\"ADMIN\";const isResident=roleName===\"RESIDENT\";const[products,setProducts]=useState([]);const[orders,setOrders]=useState([]);// ✅ Payment States\nconst[payments,setPayments]=useState([]);const[loading,setLoading]=useState(true);// Post product form states\nconst[pName,setPName]=useState(\"\");const[pDesc,setPDesc]=useState(\"\");const[pCategory,setPCategory]=useState(\"GENERAL\");const[pPrice,setPPrice]=useState(\"\");const[pQty,setPQty]=useState(\"\");const[posting,setPosting]=useState(false);// Ordering states\nconst[orderQtyMap,setOrderQtyMap]=useState({});const[orderingId,setOrderingId]=useState(null);// ✅ Payment Action States\nconst[payingOrderId,setPayingOrderId]=useState(null);const[paymentMethod,setPaymentMethod]=useState(\"MOCK_UPI\");const categories=useMemo(()=>[\"GENERAL\",\"FOOD\",\"GROCERY\",\"ELECTRONICS\",\"HOME\",\"OTHER\"],[]);const paymentMethods=useMemo(()=>[\"MOCK_UPI\",\"MOCK_CARD\",\"CASH\",\"BANK_TRANSFER\"],[]);/**\n   * LOAD DATA\n   * - Products: Admin gets ALL, Resident gets APPROVED\n   * - Payments: Admin gets ALL, Resident gets THEIRS\n   */const loadData=useCallback(async()=>{try{setLoading(true);const productPromise=isAdmin?fetchAllMarketplaceProducts():fetchMarketplaceProducts();// ✅ Fetch payments based on role\nconst paymentsPromise=isAdmin?fetchAllMarketplacePayments():fetchMyMarketplacePayments();const[prodData,orderData,payData]=await Promise.all([productPromise,fetchMarketplaceOrders(),paymentsPromise]);setProducts(prodData||[]);setOrders(orderData||[]);setPayments(payData||[]);}catch(err){console.error(\"❌ Marketplace load failed:\",err.message);alert(err.message);}finally{setLoading(false);}},[isAdmin]);useEffect(()=>{if(!authLoading&&profile){loadData();}},[authLoading,profile,loadData]);/**\n   * ADMIN: Approve Product\n   */async function handleApprove(productId){if(!window.confirm(\"Approve this product?\"))return;try{await approveMarketplaceProduct(productId);alert(\"Product approved ✅\");await loadData();}catch(err){alert(err.message);}}/**\n   * SELLER: Post Product\n   */async function handlePostProduct(e){e.preventDefault();if(!pName||!pPrice||!pQty){alert(\"Name, price and quantity are required\");return;}try{setPosting(true);await createMarketplaceProduct({name:pName,description:pDesc,category:pCategory,price:Number(pPrice),quantity:Number(pQty)});alert(\"Product submitted ✅ (waiting for admin approval)\");setPName(\"\");setPDesc(\"\");setPPrice(\"\");setPQty(\"\");setPCategory(\"GENERAL\");await loadData();}catch(err){alert(err.message);}finally{setPosting(false);}}/**\n   * RESIDENT: Place Order\n   */async function handlePlaceOrder(productId){const qty=Number(orderQtyMap[productId]||1);if(!qty||qty<=0){alert(\"Enter a valid quantity\");return;}try{setOrderingId(productId);await placeMarketplaceOrder({product_id:productId,quantity:qty});alert(\"Order placed ✅\");await loadData();}catch(err){alert(err.message);}finally{setOrderingId(null);}}/**\n   * RESIDENT: Pay for Order\n   */async function handlePayOrder(orderId){try{setPayingOrderId(orderId);const res=await payMarketplaceOrder(orderId,{payment_method:paymentMethod});alert(\"Payment success \\u2705 Ref: \".concat(res.transaction_ref));await loadData();}catch(err){alert(err.message);}finally{setPayingOrderId(null);}}if(authLoading||!profile){return/*#__PURE__*/_jsx(\"div\",{style:{padding:40,textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Verifying session...\"})});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Marketplace\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadData,children:\"Refresh\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:16},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Role:\"}),\" \",roleName||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Post a Product (Seller)\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePostProduct,style:{display:\"flex\",gap:12,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Product name\",value:pName,onChange:e=>setPName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"Description\",value:pDesc,onChange:e=>setPDesc(e.target.value)}),/*#__PURE__*/_jsx(\"select\",{style:inputStyle,value:pCategory,onChange:e=>setPCategory(e.target.value),children:categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,type:\"number\",placeholder:\"Price\",value:pPrice,onChange:e=>setPPrice(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,type:\"number\",placeholder:\"Qty\",value:pQty,onChange:e=>setPQty(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:posting,children:posting?\"Posting...\":\"Post Product\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Products\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading products...\"}):products.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No products available.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(260px, 1fr))\",gap:12},children:products.map(p=>/*#__PURE__*/_jsxs(\"div\",{style:productCardStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\"},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0},children:p.name}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.7rem\",padding:\"2px 6px\",borderRadius:4,background:p.is_approved?\"#e6fffa\":\"#fffbe6\",color:p.is_approved?\"#2c7a7b\":\"#b7791f\"},children:p.is_approved?\"LIVE\":\"PENDING\"})]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"6px 0\",color:\"#666\",fontSize:\"0.9rem\"},children:p.description}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"4px 0\",fontSize:\"0.9rem\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" \\u20B9\",p.price,\" | \",/*#__PURE__*/_jsx(\"b\",{children:\"Stock:\"}),\" \",p.quantity]}),isAdmin&&p.is_approved===false&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(p.id),style:{marginTop:10,padding:\"8px\",background:\"#28a745\",color:\"white\",border:\"none\",borderRadius:6,cursor:\"pointer\",width:\"100%\"},children:\"Approve Product\"}),isResident&&p.is_approved&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginTop:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",style:{width:60},value:orderQtyMap[p.id]||1,onChange:e=>setOrderQtyMap(prev=>_objectSpread(_objectSpread({},prev),{},{[p.id]:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{style:{flex:1},onClick:()=>handlePlaceOrder(p.id),disabled:orderingId===p.id,children:orderingId===p.id?\"...\":\"Buy\"})]})]},p.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Orders\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading orders...\"}):orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No orders found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{width:\"100%\",cellPadding:\"10\",style:{borderCollapse:\"collapse\",minWidth:600},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f3f3f3\"},children:[/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Total Cost\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Order Status\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(o=>{var _o$marketplace_produc,_o$marketplace_produc2;// Calculate Total if product data exists\nconst totalCost=(_o$marketplace_produc=o.marketplace_products)!==null&&_o$marketplace_produc!==void 0&&_o$marketplace_produc.price?o.marketplace_products.price*o.quantity:\"—\";return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #eee\"},children:[/*#__PURE__*/_jsx(\"td\",{children:((_o$marketplace_produc2=o.marketplace_products)===null||_o$marketplace_produc2===void 0?void 0:_o$marketplace_produc2.name)||\"Product\"}),/*#__PURE__*/_jsx(\"td\",{children:o.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9 \",totalCost]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{children:o.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"b\",{style:{color:o.payment_status===\"PAID\"?\"green\":\"orange\"},children:o.payment_status||\"UNPAID\"})}),/*#__PURE__*/_jsx(\"td\",{children:isResident&&o.payment_status!==\"PAID\"?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"select\",{style:{padding:4},value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),children:paymentMethods.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m,children:m},m))}),/*#__PURE__*/_jsx(\"button\",{disabled:payingOrderId===o.id,onClick:()=>handlePayOrder(o.id),style:{cursor:\"pointer\"},children:payingOrderId===o.id?\"Paying...\":\"Pay Now\"})]}):/*#__PURE__*/_jsx(\"span\",{children:o.payment_status===\"PAID\"?\"Completed\":\"—\"})})]},o.id);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:cardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:isAdmin?\"All Marketplace Payments\":\"My Marketplace Payments\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading payments...\"}):payments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No payments found.\"}):/*#__PURE__*/_jsx(\"div\",{style:{overflowX:\"auto\"},children:/*#__PURE__*/_jsxs(\"table\",{width:\"100%\",cellPadding:\"10\",style:{borderCollapse:\"collapse\",minWidth:600},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f3f3f3\"},children:[/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Method\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Reference\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Paid At\"}),/*#__PURE__*/_jsx(\"th\",{align:\"left\",children:\"Receipt\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:payments.map(p=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #eee\"},children:[/*#__PURE__*/_jsx(\"td\",{children:p.payment_method}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9 \",p.amount_paid]}),/*#__PURE__*/_jsx(\"td\",{children:p.transaction_ref}),/*#__PURE__*/_jsx(\"td\",{children:p.paid_at?new Date(p.paid_at).toLocaleString():\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/marketplace/payments/\".concat(p.id,\"/receipt\")),children:\"View Receipt\"})})]},p.id))})]})})]})]});}const cardStyle={background:\"#fff\",padding:20,borderRadius:12,marginBottom:20,boxShadow:\"0 2px 8px rgba(0,0,0,0.05)\"};const inputStyle={padding:\"10px\",borderRadius:6,border:\"1px solid #ddd\",flex:\"1 1 150px\"};const productCardStyle={background:\"#fff\",padding:16,borderRadius:10,border:\"1px solid #edf2f7\",display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\"};","map":{"version":3,"names":["useEffect","useMemo","useState","useCallback","useNavigate","useAuth","fetchMarketplaceProducts","fetchAllMarketplaceProducts","approveMarketplaceProduct","createMarketplaceProduct","placeMarketplaceOrder","fetchMarketplaceOrders","fetchMyMarketplacePayments","fetchAllMarketplacePayments","payMarketplaceOrder","jsx","_jsx","jsxs","_jsxs","MarketplacePage","_profile$roles","_profile$user_roles","profile","loading","authLoading","navigate","roleName","roles","name","role","user_roles","isAdmin","isResident","products","setProducts","orders","setOrders","payments","setPayments","setLoading","pName","setPName","pDesc","setPDesc","pCategory","setPCategory","pPrice","setPPrice","pQty","setPQty","posting","setPosting","orderQtyMap","setOrderQtyMap","orderingId","setOrderingId","payingOrderId","setPayingOrderId","paymentMethod","setPaymentMethod","categories","paymentMethods","loadData","productPromise","paymentsPromise","prodData","orderData","payData","Promise","all","err","console","error","message","alert","handleApprove","productId","window","confirm","handlePostProduct","e","preventDefault","description","category","price","Number","quantity","handlePlaceOrder","qty","product_id","handlePayOrder","orderId","res","payment_method","concat","transaction_ref","style","padding","textAlign","children","display","justifyContent","alignItems","onClick","marginBottom","cardStyle","onSubmit","gap","flexWrap","inputStyle","placeholder","value","onChange","target","map","c","type","disabled","length","gridTemplateColumns","p","productCardStyle","margin","fontSize","borderRadius","background","is_approved","color","id","marginTop","border","cursor","width","min","prev","_objectSpread","flex","overflowX","cellPadding","borderCollapse","minWidth","align","o","_o$marketplace_produc","_o$marketplace_produc2","totalCost","marketplace_products","borderBottom","status","payment_status","m","amount_paid","paid_at","Date","toLocaleString","boxShadow","flexDirection"],"sources":["/home/steve/amala/client/src/pages/marketplace/MarketplacePage.js"],"sourcesContent":["import { useEffect, useMemo, useState, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\"; // ✅ Added import\nimport { useAuth } from \"../../auth/AuthContext\";\nimport {\n  fetchMarketplaceProducts,\n  fetchAllMarketplaceProducts,\n  approveMarketplaceProduct,\n  createMarketplaceProduct,\n  placeMarketplaceOrder,\n  fetchMarketplaceOrders,\n  // ✅ New imports for payments\n  fetchMyMarketplacePayments,\n  fetchAllMarketplacePayments,\n  payMarketplaceOrder, \n} from \"../../api/marketplace.api\";\n\nexport default function MarketplacePage() {\n  const { profile, loading: authLoading } = useAuth();\n  const navigate = useNavigate(); // ✅ Init navigate\n\n  const roleName =\n    profile?.roles?.name || profile?.role || profile?.user_roles?.role || null;\n\n  const isAdmin = roleName === \"ADMIN\";\n  const isResident = roleName === \"RESIDENT\";\n\n  const [products, setProducts] = useState([]);\n  const [orders, setOrders] = useState([]);\n  // ✅ Payment States\n  const [payments, setPayments] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  // Post product form states\n  const [pName, setPName] = useState(\"\");\n  const [pDesc, setPDesc] = useState(\"\");\n  const [pCategory, setPCategory] = useState(\"GENERAL\");\n  const [pPrice, setPPrice] = useState(\"\");\n  const [pQty, setPQty] = useState(\"\");\n  const [posting, setPosting] = useState(false);\n\n  // Ordering states\n  const [orderQtyMap, setOrderQtyMap] = useState({});\n  const [orderingId, setOrderingId] = useState(null);\n\n  // ✅ Payment Action States\n  const [payingOrderId, setPayingOrderId] = useState(null);\n  const [paymentMethod, setPaymentMethod] = useState(\"MOCK_UPI\");\n\n  const categories = useMemo(\n    () => [\"GENERAL\", \"FOOD\", \"GROCERY\", \"ELECTRONICS\", \"HOME\", \"OTHER\"],\n    []\n  );\n\n  const paymentMethods = useMemo(\n    () => [\"MOCK_UPI\", \"MOCK_CARD\", \"CASH\", \"BANK_TRANSFER\"],\n    []\n  );\n\n  /**\n   * LOAD DATA\n   * - Products: Admin gets ALL, Resident gets APPROVED\n   * - Payments: Admin gets ALL, Resident gets THEIRS\n   */\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n\n      const productPromise = isAdmin \n        ? fetchAllMarketplaceProducts() \n        : fetchMarketplaceProducts();\n\n      // ✅ Fetch payments based on role\n      const paymentsPromise = isAdmin\n        ? fetchAllMarketplacePayments()\n        : fetchMyMarketplacePayments();\n\n      const [prodData, orderData, payData] = await Promise.all([\n        productPromise,\n        fetchMarketplaceOrders(),\n        paymentsPromise,\n      ]);\n\n      setProducts(prodData || []);\n      setOrders(orderData || []);\n      setPayments(payData || []);\n    } catch (err) {\n      console.error(\"❌ Marketplace load failed:\", err.message);\n      alert(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [isAdmin]);\n\n  useEffect(() => {\n    if (!authLoading && profile) {\n      loadData();\n    }\n  }, [authLoading, profile, loadData]);\n\n  /**\n   * ADMIN: Approve Product\n   */\n  async function handleApprove(productId) {\n    if (!window.confirm(\"Approve this product?\")) return;\n    try {\n      await approveMarketplaceProduct(productId);\n      alert(\"Product approved ✅\");\n      await loadData();\n    } catch (err) {\n      alert(err.message);\n    }\n  }\n\n  /**\n   * SELLER: Post Product\n   */\n  async function handlePostProduct(e) {\n    e.preventDefault();\n    if (!pName || !pPrice || !pQty) {\n      alert(\"Name, price and quantity are required\");\n      return;\n    }\n\n    try {\n      setPosting(true);\n      await createMarketplaceProduct({\n        name: pName,\n        description: pDesc,\n        category: pCategory,\n        price: Number(pPrice),\n        quantity: Number(pQty),\n      });\n\n      alert(\"Product submitted ✅ (waiting for admin approval)\");\n      setPName(\"\"); setPDesc(\"\"); setPPrice(\"\"); setPQty(\"\");\n      setPCategory(\"GENERAL\");\n\n      await loadData();\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setPosting(false);\n    }\n  }\n\n  /**\n   * RESIDENT: Place Order\n   */\n  async function handlePlaceOrder(productId) {\n    const qty = Number(orderQtyMap[productId] || 1);\n    if (!qty || qty <= 0) {\n      alert(\"Enter a valid quantity\");\n      return;\n    }\n\n    try {\n      setOrderingId(productId);\n      await placeMarketplaceOrder({\n        product_id: productId,\n        quantity: qty,\n      });\n\n      alert(\"Order placed ✅\");\n      await loadData();\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setOrderingId(null);\n    }\n  }\n\n  /**\n   * RESIDENT: Pay for Order\n   */\n  async function handlePayOrder(orderId) {\n    try {\n      setPayingOrderId(orderId);\n\n      const res = await payMarketplaceOrder(orderId, {\n        payment_method: paymentMethod,\n      });\n\n      alert(`Payment success ✅ Ref: ${res.transaction_ref}`);\n      await loadData();\n    } catch (err) {\n      alert(err.message);\n    } finally {\n      setPayingOrderId(null);\n    }\n  }\n\n  if (authLoading || !profile) {\n    return (\n      <div style={{ padding: 40, textAlign: \"center\" }}>\n        <h3>Verifying session...</h3>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: 20 }}>\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        <h2>Marketplace</h2>\n        <button onClick={loadData}>Refresh</button>\n      </div>\n\n      <div style={{ marginBottom: 16 }}>\n        <strong>Role:</strong> {roleName || \"Unknown\"}\n      </div>\n\n      {/* POST PRODUCT SECTION */}\n      <div style={cardStyle}>\n        <h3>Post a Product (Seller)</h3>\n        <form onSubmit={handlePostProduct} style={{ display: \"flex\", gap: 12, flexWrap: \"wrap\" }}>\n          <input style={inputStyle} placeholder=\"Product name\" value={pName} onChange={(e) => setPName(e.target.value)} />\n          <input style={inputStyle} placeholder=\"Description\" value={pDesc} onChange={(e) => setPDesc(e.target.value)} />\n          <select style={inputStyle} value={pCategory} onChange={(e) => setPCategory(e.target.value)}>\n            {categories.map((c) => <option key={c} value={c}>{c}</option>)}\n          </select>\n          <input style={inputStyle} type=\"number\" placeholder=\"Price\" value={pPrice} onChange={(e) => setPPrice(e.target.value)} />\n          <input style={inputStyle} type=\"number\" placeholder=\"Qty\" value={pQty} onChange={(e) => setPQty(e.target.value)} />\n          <button type=\"submit\" disabled={posting}>{posting ? \"Posting...\" : \"Post Product\"}</button>\n        </form>\n      </div>\n\n      {/* PRODUCTS LIST */}\n      <div style={cardStyle}>\n        <h3>Available Products</h3>\n        {loading ? (\n          <p>Loading products...</p>\n        ) : products.length === 0 ? (\n          <p>No products available.</p>\n        ) : (\n          <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fit, minmax(260px, 1fr))\", gap: 12 }}>\n            {products.map((p) => (\n              <div key={p.id} style={productCardStyle}>\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"flex-start\" }}>\n                  <h4 style={{ margin: 0 }}>{p.name}</h4>\n                  <span style={{ \n                    fontSize: \"0.7rem\", padding: \"2px 6px\", borderRadius: 4, \n                    background: p.is_approved ? \"#e6fffa\" : \"#fffbe6\",\n                    color: p.is_approved ? \"#2c7a7b\" : \"#b7791f\"\n                  }}>\n                    {p.is_approved ? \"LIVE\" : \"PENDING\"}\n                  </span>\n                </div>\n                <p style={{ margin: \"6px 0\", color: \"#666\", fontSize: \"0.9rem\" }}>{p.description}</p>\n                <p style={{ margin: \"4px 0\", fontSize: \"0.9rem\" }}><b>Price:</b> ₹{p.price} | <b>Stock:</b> {p.quantity}</p>\n\n                {/* ADMIN APPROVE BUTTON */}\n                {isAdmin && p.is_approved === false && (\n                  <button\n                    onClick={() => handleApprove(p.id)}\n                    style={{\n                      marginTop: 10, padding: \"8px\", background: \"#28a745\", color: \"white\", \n                      border: \"none\", borderRadius: 6, cursor: \"pointer\", width: \"100%\"\n                    }}\n                  >\n                    Approve Product\n                  </button>\n                )}\n\n                {/* RESIDENT BUY BUTTON */}\n                {isResident && p.is_approved && (\n                  <div style={{ display: \"flex\", gap: 8, marginTop: 10 }}>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      style={{ width: 60 }}\n                      value={orderQtyMap[p.id] || 1}\n                      onChange={(e) => setOrderQtyMap((prev) => ({ ...prev, [p.id]: e.target.value }))}\n                    />\n                    <button style={{ flex: 1 }} onClick={() => handlePlaceOrder(p.id)} disabled={orderingId === p.id}>\n                      {orderingId === p.id ? \"...\" : \"Buy\"}\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* ORDERS TABLE */}\n      <div style={cardStyle}>\n        <h3>Orders</h3>\n        {loading ? (\n          <p>Loading orders...</p>\n        ) : orders.length === 0 ? (\n          <p>No orders found.</p>\n        ) : (\n          <div style={{ overflowX: \"auto\" }}>\n            <table width=\"100%\" cellPadding=\"10\" style={{ borderCollapse: \"collapse\", minWidth: 600 }}>\n              <thead>\n                <tr style={{ background: \"#f3f3f3\" }}>\n                  <th align=\"left\">Product</th>\n                  <th align=\"left\">Qty</th>\n                  <th align=\"left\">Total Cost</th>\n                  <th align=\"left\">Order Status</th>\n                  <th align=\"left\">Payment Status</th>\n                  <th align=\"left\">Action</th>\n                </tr>\n              </thead>\n              <tbody>\n                {orders.map((o) => {\n                   // Calculate Total if product data exists\n                   const totalCost = o.marketplace_products?.price \n                     ? o.marketplace_products.price * o.quantity \n                     : \"—\";\n\n                   return (\n                    <tr key={o.id} style={{ borderBottom: \"1px solid #eee\" }}>\n                      <td>{o.marketplace_products?.name || \"Product\"}</td>\n                      <td>{o.quantity}</td>\n                      <td>₹ {totalCost}</td>\n                      <td><b>{o.status}</b></td>\n                      \n                      {/* ✅ Payment Status Column */}\n                      <td>\n                        <b style={{ \n                          color: o.payment_status === \"PAID\" ? \"green\" : \"orange\" \n                        }}>\n                          {o.payment_status || \"UNPAID\"}\n                        </b>\n                      </td>\n\n                      {/* ✅ Action Column (Pay Button) */}\n                      <td>\n                        {isResident && o.payment_status !== \"PAID\" ? (\n                          <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n                            <select\n                              style={{ padding: 4 }}\n                              value={paymentMethod}\n                              onChange={(e) => setPaymentMethod(e.target.value)}\n                            >\n                              {paymentMethods.map((m) => (\n                                <option key={m} value={m}>{m}</option>\n                              ))}\n                            </select>\n\n                            <button\n                              disabled={payingOrderId === o.id}\n                              onClick={() => handlePayOrder(o.id)}\n                              style={{ cursor: \"pointer\" }}\n                            >\n                              {payingOrderId === o.id ? \"Paying...\" : \"Pay Now\"}\n                            </button>\n                          </div>\n                        ) : (\n                          <span>{o.payment_status === \"PAID\" ? \"Completed\" : \"—\"}</span>\n                        )}\n                      </td>\n                    </tr>\n                   );\n                })}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n      {/* ✅ NEW: MARKETPLACE PAYMENTS TABLE */}\n      <div style={cardStyle}>\n        <h3>{isAdmin ? \"All Marketplace Payments\" : \"My Marketplace Payments\"}</h3>\n\n        {loading ? (\n          <p>Loading payments...</p>\n        ) : payments.length === 0 ? (\n          <p>No payments found.</p>\n        ) : (\n          <div style={{ overflowX: \"auto\" }}>\n            <table width=\"100%\" cellPadding=\"10\" style={{ borderCollapse: \"collapse\", minWidth: 600 }}>\n              <thead>\n                <tr style={{ background: \"#f3f3f3\" }}>\n                  <th align=\"left\">Method</th>\n                  <th align=\"left\">Amount</th>\n                  <th align=\"left\">Reference</th>\n                  <th align=\"left\">Paid At</th>\n                  <th align=\"left\">Receipt</th>\n                </tr>\n              </thead>\n              <tbody>\n                {payments.map((p) => (\n                  <tr key={p.id} style={{ borderBottom: \"1px solid #eee\" }}>\n                    <td>{p.payment_method}</td>\n                    <td>₹ {p.amount_paid}</td>\n                    <td>{p.transaction_ref}</td>\n                    <td>{p.paid_at ? new Date(p.paid_at).toLocaleString() : \"-\"}</td>\n                    <td>\n                      <button onClick={() => navigate(`/marketplace/payments/${p.id}/receipt`)}>\n                        View Receipt\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n      </div>\n\n    </div>\n  );\n}\n\nconst cardStyle = { background: \"#fff\", padding: 20, borderRadius: 12, marginBottom: 20, boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\" };\nconst inputStyle = { padding: \"10px\", borderRadius: 6, border: \"1px solid #ddd\", flex: \"1 1 150px\" };\nconst productCardStyle = { background: \"#fff\", padding: 16, borderRadius: 10, border: \"1px solid #edf2f7\", display: \"flex\", flexDirection: \"column\", justifyContent: \"space-between\" };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}