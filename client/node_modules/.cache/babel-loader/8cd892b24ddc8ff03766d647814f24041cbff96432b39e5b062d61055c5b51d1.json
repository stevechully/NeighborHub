{"ast":null,"code":"import { apiFetch } from \"./client\";\n\n/**\n * GET worker bookings\n * - Resident/Worker: uses default RLS endpoint\n * - Admin: uses admin endpoint to bypass RLS\n */\nexport function fetchWorkerBookings(filters = {}, isAdmin = false) {\n  // ✅ FIX: Only include status in the query if it actually has a value\n  const cleanFilters = {};\n  if (filters.status) {\n    cleanFilters.status = filters.status;\n  }\n  const params = new URLSearchParams(cleanFilters).toString();\n  const baseUrl = isAdmin ? \"/api/worker-services/admin/all\" : \"/api/worker-services\";\n  return apiFetch(`${baseUrl}${params ? `?${params}` : \"\"}`);\n}\n\n/**\n * POST /api/worker-services\n * Resident creates booking\n */\nexport function createWorkerBooking(payload) {\n  return apiFetch(\"/api/worker-services\", {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/assign\n * Admin assigns worker\n */\nexport function assignWorkerToBooking(id, worker_id) {\n  return apiFetch(`/api/worker-services/${id}/assign`, {\n    method: \"PATCH\",\n    body: JSON.stringify({\n      worker_id\n    })\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/status\n * Worker updates booking status\n */\nexport function updateWorkerBookingStatus(id, status) {\n  return apiFetch(`/api/worker-services/${id}/status`, {\n    method: \"PATCH\",\n    body: JSON.stringify({\n      status\n    })\n  });\n}","map":{"version":3,"names":["apiFetch","fetchWorkerBookings","filters","isAdmin","cleanFilters","status","params","URLSearchParams","toString","baseUrl","createWorkerBooking","payload","method","body","JSON","stringify","assignWorkerToBooking","id","worker_id","updateWorkerBookingStatus"],"sources":["/home/steve/amala/client/src/api/workerServices.api.js"],"sourcesContent":["import { apiFetch } from \"./client\";\n\n/**\n * GET worker bookings\n * - Resident/Worker: uses default RLS endpoint\n * - Admin: uses admin endpoint to bypass RLS\n */\nexport function fetchWorkerBookings(filters = {}, isAdmin = false) {\n  // ✅ FIX: Only include status in the query if it actually has a value\n  const cleanFilters = {};\n  if (filters.status) {\n    cleanFilters.status = filters.status;\n  }\n\n  const params = new URLSearchParams(cleanFilters).toString();\n\n  const baseUrl = isAdmin\n    ? \"/api/worker-services/admin/all\"\n    : \"/api/worker-services\";\n\n  return apiFetch(`${baseUrl}${params ? `?${params}` : \"\"}`);\n}\n\n/**\n * POST /api/worker-services\n * Resident creates booking\n */\nexport function createWorkerBooking(payload) {\n  return apiFetch(\"/api/worker-services\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/assign\n * Admin assigns worker\n */\nexport function assignWorkerToBooking(id, worker_id) {\n  return apiFetch(`/api/worker-services/${id}/assign`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ worker_id }),\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/status\n * Worker updates booking status\n */\nexport function updateWorkerBookingStatus(id, status) {\n  return apiFetch(`/api/worker-services/${id}/status`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ status }),\n  });\n}"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,UAAU;;AAEnC;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,mBAAmBA,CAACC,OAAO,GAAG,CAAC,CAAC,EAAEC,OAAO,GAAG,KAAK,EAAE;EACjE;EACA,MAAMC,YAAY,GAAG,CAAC,CAAC;EACvB,IAAIF,OAAO,CAACG,MAAM,EAAE;IAClBD,YAAY,CAACC,MAAM,GAAGH,OAAO,CAACG,MAAM;EACtC;EAEA,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACH,YAAY,CAAC,CAACI,QAAQ,CAAC,CAAC;EAE3D,MAAMC,OAAO,GAAGN,OAAO,GACnB,gCAAgC,GAChC,sBAAsB;EAE1B,OAAOH,QAAQ,CAAC,GAAGS,OAAO,GAAGH,MAAM,GAAG,IAAIA,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC;AAC5D;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASI,mBAAmBA,CAACC,OAAO,EAAE;EAC3C,OAAOX,QAAQ,CAAC,sBAAsB,EAAE;IACtCY,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO;EAC9B,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASK,qBAAqBA,CAACC,EAAE,EAAEC,SAAS,EAAE;EACnD,OAAOlB,QAAQ,CAAC,wBAAwBiB,EAAE,SAAS,EAAE;IACnDL,MAAM,EAAE,OAAO;IACfC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEG;IAAU,CAAC;EACpC,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,SAASC,yBAAyBA,CAACF,EAAE,EAAEZ,MAAM,EAAE;EACpD,OAAOL,QAAQ,CAAC,wBAAwBiB,EAAE,SAAS,EAAE;IACnDL,MAAM,EAAE,OAAO;IACfC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEV;IAAO,CAAC;EACjC,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}