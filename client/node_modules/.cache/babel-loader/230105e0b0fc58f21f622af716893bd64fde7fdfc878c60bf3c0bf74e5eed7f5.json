{"ast":null,"code":"var _jsxFileName = \"/home/steve/amala/client/src/auth/RequireAuth.js\",\n  _s = $RefreshSig$();\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RequireAuth({\n  children\n}) {\n  _s();\n  const {\n    user,\n    profile,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // 1. Wait for AuthContext to finish checking the session\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontFamily: 'sans-serif'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading application...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 2. If no user is logged in, redirect to Login\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 3. UPDATED: If User exists but Profile is still loading/missing\n  // We show a clean sync message instead of the red debug error.\n  if (!profile) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        flexDirection: 'column',\n        fontFamily: 'sans-serif',\n        color: '#666'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Synchronizing your profile...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        style: {\n          marginTop: '10px',\n          padding: '8px 16px',\n          cursor: 'pointer',\n          borderRadius: '4px',\n          border: '1px solid #ccc',\n          background: '#fff'\n        },\n        children: \"Refresh Page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 4. Profile is loaded, safe to render the protected content\n  return children;\n}\n_s(RequireAuth, \"lSDzcenYjlEitYiT//XxrUxtOEU=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RequireAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","RequireAuth","children","_s","user","profile","loading","location","style","display","justifyContent","alignItems","height","fontFamily","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","flexDirection","color","onClick","window","reload","marginTop","padding","cursor","borderRadius","border","background","_c","$RefreshReg$"],"sources":["/home/steve/amala/client/src/auth/RequireAuth.js"],"sourcesContent":["import { Navigate, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"./AuthContext\";\n\nexport default function RequireAuth({ children }) {\n  const { user, profile, loading } = useAuth();\n  const location = useLocation();\n\n  // 1. Wait for AuthContext to finish checking the session\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontFamily: 'sans-serif' \n      }}>\n        <p>Loading application...</p>\n      </div>\n    );\n  }\n\n  // 2. If no user is logged in, redirect to Login\n  if (!user) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // 3. UPDATED: If User exists but Profile is still loading/missing\n  // We show a clean sync message instead of the red debug error.\n  if (!profile) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        flexDirection: 'column',\n        fontFamily: 'sans-serif',\n        color: '#666'\n      }}>\n        <p>Synchronizing your profile...</p>\n        <button \n          onClick={() => window.location.reload()}\n          style={{ \n            marginTop: '10px', \n            padding: '8px 16px', \n            cursor: 'pointer',\n            borderRadius: '4px',\n            border: '1px solid #ccc',\n            background: '#fff'\n          }}\n        >\n          Refresh Page\n        </button>\n      </div>\n    );\n  }\n\n  // 4. Profile is loaded, safe to render the protected content\n  return children;\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,eAAe,SAASC,WAAWA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAChD,MAAM;IAAEC,IAAI;IAAEC,OAAO;IAAEC;EAAQ,CAAC,GAAGR,OAAO,CAAC,CAAC;EAC5C,MAAMS,QAAQ,GAAGV,WAAW,CAAC,CAAC;;EAE9B;EACA,IAAIS,OAAO,EAAE;IACX,oBACEN,OAAA;MAAKQ,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfC,UAAU,EAAE;MACd,CAAE;MAAAX,QAAA,eACAF,OAAA;QAAAE,QAAA,EAAG;MAAsB;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1B,CAAC;EAEV;;EAEA;EACA,IAAI,CAACb,IAAI,EAAE;IACT,oBAAOJ,OAAA,CAACJ,QAAQ;MAACsB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAEb;MAAS,CAAE;MAACc,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACA;EACA,IAAI,CAACZ,OAAO,EAAE;IACZ,oBACEL,OAAA;MAAKQ,KAAK,EAAE;QACVC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBC,MAAM,EAAE,OAAO;QACfU,aAAa,EAAE,QAAQ;QACvBT,UAAU,EAAE,YAAY;QACxBU,KAAK,EAAE;MACT,CAAE;MAAArB,QAAA,gBACAF,OAAA;QAAAE,QAAA,EAAG;MAA6B;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACpCjB,OAAA;QACEwB,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAAClB,QAAQ,CAACmB,MAAM,CAAC,CAAE;QACxClB,KAAK,EAAE;UACLmB,SAAS,EAAE,MAAM;UACjBC,OAAO,EAAE,UAAU;UACnBC,MAAM,EAAE,SAAS;UACjBC,YAAY,EAAE,KAAK;UACnBC,MAAM,EAAE,gBAAgB;UACxBC,UAAU,EAAE;QACd,CAAE;QAAA9B,QAAA,EACH;MAED;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;;EAEA;EACA,OAAOf,QAAQ;AACjB;AAACC,EAAA,CAzDuBF,WAAW;EAAA,QACEH,OAAO,EACzBD,WAAW;AAAA;AAAAoC,EAAA,GAFNhC,WAAW;AAAA,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}