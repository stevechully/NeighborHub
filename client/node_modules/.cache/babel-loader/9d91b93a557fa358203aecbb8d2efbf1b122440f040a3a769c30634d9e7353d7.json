{"ast":null,"code":"import{apiFetch}from\"./client\";/**\n * GET worker bookings\n * - Resident/Worker: uses default RLS endpoint\n * - Admin: uses admin endpoint to bypass RLS\n */export function fetchWorkerBookings(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};let isAdmin=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const cleanFilters={};if(filters.status){cleanFilters.status=filters.status;}const params=new URLSearchParams(cleanFilters).toString();const baseUrl=isAdmin?\"/api/worker-services/admin/all\":\"/api/worker-services\";return apiFetch(\"\".concat(baseUrl).concat(params?\"?\".concat(params):\"\"));}/**\n * POST /api/worker-services\n * Resident creates booking\n */export function createWorkerBooking(payload){return apiFetch(\"/api/worker-services\",{method:\"POST\",body:JSON.stringify(payload)});}/**\n * PATCH /api/worker-services/:id/assign\n * Admin assigns worker\n */export function assignWorkerToBooking(id,worker_id){return apiFetch(\"/api/worker-services/\".concat(id,\"/assign\"),{method:\"PATCH\",body:JSON.stringify({worker_id})});}/**\n * PATCH /api/worker-services/:id/status\n * Worker updates booking status\n */export function updateWorkerBookingStatus(id,status){return apiFetch(\"/api/worker-services/\".concat(id,\"/status\"),{method:\"PATCH\",body:JSON.stringify({status})});}/**\n * POST /api/worker-services/:id/pay\n * Resident pays for a completed service\n */export function payForWorkerService(id,payload){return apiFetch(\"/api/worker-services/\".concat(id,\"/pay\"),{method:\"POST\",body:JSON.stringify(payload)});}","map":{"version":3,"names":["apiFetch","fetchWorkerBookings","filters","arguments","length","undefined","isAdmin","cleanFilters","status","params","URLSearchParams","toString","baseUrl","concat","createWorkerBooking","payload","method","body","JSON","stringify","assignWorkerToBooking","id","worker_id","updateWorkerBookingStatus","payForWorkerService"],"sources":["/home/steve/amala/client/src/api/workerServices.api.js"],"sourcesContent":["import { apiFetch } from \"./client\";\n\n/**\n * GET worker bookings\n * - Resident/Worker: uses default RLS endpoint\n * - Admin: uses admin endpoint to bypass RLS\n */\nexport function fetchWorkerBookings(filters = {}, isAdmin = false) {\n  const cleanFilters = {};\n  if (filters.status) {\n    cleanFilters.status = filters.status;\n  }\n\n  const params = new URLSearchParams(cleanFilters).toString();\n\n  const baseUrl = isAdmin\n    ? \"/api/worker-services/admin/all\"\n    : \"/api/worker-services\";\n\n  return apiFetch(`${baseUrl}${params ? `?${params}` : \"\"}`);\n}\n\n/**\n * POST /api/worker-services\n * Resident creates booking\n */\nexport function createWorkerBooking(payload) {\n  return apiFetch(\"/api/worker-services\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/assign\n * Admin assigns worker\n */\nexport function assignWorkerToBooking(id, worker_id) {\n  return apiFetch(`/api/worker-services/${id}/assign`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ worker_id }),\n  });\n}\n\n/**\n * PATCH /api/worker-services/:id/status\n * Worker updates booking status\n */\nexport function updateWorkerBookingStatus(id, status) {\n  return apiFetch(`/api/worker-services/${id}/status`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ status }),\n  });\n}\n\n/**\n * POST /api/worker-services/:id/pay\n * Resident pays for a completed service\n */\nexport function payForWorkerService(id, payload) {\n  return apiFetch(`/api/worker-services/${id}/pay`, {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  });\n}"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,UAAU,CAEnC;AACA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAC,mBAAmBA,CAAA,CAAgC,IAA/B,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,IAAE,CAAAG,OAAO,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,CAC/D,KAAM,CAAAI,YAAY,CAAG,CAAC,CAAC,CACvB,GAAIL,OAAO,CAACM,MAAM,CAAE,CAClBD,YAAY,CAACC,MAAM,CAAGN,OAAO,CAACM,MAAM,CACtC,CAEA,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACH,YAAY,CAAC,CAACI,QAAQ,CAAC,CAAC,CAE3D,KAAM,CAAAC,OAAO,CAAGN,OAAO,CACnB,gCAAgC,CAChC,sBAAsB,CAE1B,MAAO,CAAAN,QAAQ,IAAAa,MAAA,CAAID,OAAO,EAAAC,MAAA,CAAGJ,MAAM,KAAAI,MAAA,CAAOJ,MAAM,EAAK,EAAE,CAAE,CAAC,CAC5D,CAEA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAK,mBAAmBA,CAACC,OAAO,CAAE,CAC3C,MAAO,CAAAf,QAAQ,CAAC,sBAAsB,CAAE,CACtCgB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO,CAC9B,CAAC,CAAC,CACJ,CAEA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAK,qBAAqBA,CAACC,EAAE,CAAEC,SAAS,CAAE,CACnD,MAAO,CAAAtB,QAAQ,yBAAAa,MAAA,CAAyBQ,EAAE,YAAW,CACnDL,MAAM,CAAE,OAAO,CACfC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEG,SAAU,CAAC,CACpC,CAAC,CAAC,CACJ,CAEA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAC,yBAAyBA,CAACF,EAAE,CAAEb,MAAM,CAAE,CACpD,MAAO,CAAAR,QAAQ,yBAAAa,MAAA,CAAyBQ,EAAE,YAAW,CACnDL,MAAM,CAAE,OAAO,CACfC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEX,MAAO,CAAC,CACjC,CAAC,CAAC,CACJ,CAEA;AACA;AACA;AACA,GACA,MAAO,SAAS,CAAAgB,mBAAmBA,CAACH,EAAE,CAAEN,OAAO,CAAE,CAC/C,MAAO,CAAAf,QAAQ,yBAAAa,MAAA,CAAyBQ,EAAE,SAAQ,CAChDL,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACJ,OAAO,CAC9B,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}