{"ast":null,"code":"import _objectSpread from\"/home/steve/amala/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import{signupUser}from\"../../api/auth.api\";// ✅ Using the specific auth API\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Signup(){const navigate=useNavigate();const[fullName,setFullName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[role,setRole]=useState(\"RESIDENT\");const[loading,setLoading]=useState(false);async function handleSignup(e){e.preventDefault();try{setLoading(true);// ✅ Now using signupUser without requiring an auth token\nawait signupUser({full_name:fullName,// Maps to the backend expected field\nemail:email,password:password,role:role// RESIDENT, SECURITY, SELLER, or WORKER\n});alert(\"Signup successful ✅ Please login with your credentials.\");navigate(\"/login\");}catch(err){alert(err.message||\"Signup failed. Please try again.\");}finally{setLoading(false);}}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:40,maxWidth:450,margin:\"0 auto\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginBottom:24},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Account\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"#666\"},children:\"Join the Resident Portal community\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,style:{display:\"grid\",gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:4},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"John Doe\",value:fullName,onChange:e=>setFullName(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:4},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"name@example.com\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:4},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{style:inputStyle,placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:4},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"Select Your Role\"}),/*#__PURE__*/_jsxs(\"select\",{style:inputStyle,value:role,onChange:e=>setRole(e.target.value),disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"RESIDENT\",children:\"Resident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SELLER\",children:\"Seller (Marketplace)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SECURITY\",children:\"Security\"}),/*#__PURE__*/_jsx(\"option\",{value:\"WORKER\",children:\"Worker\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:_objectSpread(_objectSpread({},buttonStyle),{},{backgroundColor:loading?\"#ccc\":\"#007bff\",cursor:loading?\"not-allowed\":\"pointer\"}),children:loading?\"Processing...\":\"Sign Up\"}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:\"center\",marginTop:16,fontSize:\"0.9rem\"},children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",style:{color:\"#007bff\",textDecoration:\"none\",fontWeight:\"bold\"},children:\"Login here\"})]})]})]});}// Styles\nconst labelStyle={fontSize:\"0.85rem\",fontWeight:\"600\",color:\"#444\"};const inputStyle={padding:\"10px\",borderRadius:\"6px\",border:\"1px solid #ddd\",fontSize:\"1rem\"};const buttonStyle={padding:\"12px\",color:\"#fff\",border:\"none\",borderRadius:\"6px\",fontSize:\"1rem\",fontWeight:\"bold\",marginTop:\"10px\",transition:\"background-color 0.2s\"};","map":{"version":3,"names":["useState","useNavigate","Link","signupUser","jsx","_jsx","jsxs","_jsxs","Signup","navigate","fullName","setFullName","email","setEmail","password","setPassword","role","setRole","loading","setLoading","handleSignup","e","preventDefault","full_name","alert","err","message","style","padding","maxWidth","margin","children","textAlign","marginBottom","color","onSubmit","display","gap","flexDirection","labelStyle","inputStyle","placeholder","value","onChange","target","required","disabled","type","_objectSpread","buttonStyle","backgroundColor","cursor","marginTop","fontSize","to","textDecoration","fontWeight","borderRadius","border","transition"],"sources":["/home/steve/amala/client/src/pages/auth/Signup.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { signupUser } from \"../../api/auth.api\"; // ✅ Using the specific auth API\n\nexport default function Signup() {\n  const navigate = useNavigate();\n\n  const [fullName, setFullName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [role, setRole] = useState(\"RESIDENT\");\n  const [loading, setLoading] = useState(false);\n\n  async function handleSignup(e) {\n    e.preventDefault();\n\n    try {\n      setLoading(true);\n      // ✅ Now using signupUser without requiring an auth token\n      await signupUser({\n        full_name: fullName, // Maps to the backend expected field\n        email: email,\n        password: password,\n        role: role, // RESIDENT, SECURITY, SELLER, or WORKER\n      });\n\n      alert(\"Signup successful ✅ Please login with your credentials.\");\n      navigate(\"/login\");\n    } catch (err) {\n      alert(err.message || \"Signup failed. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div style={{ padding: 40, maxWidth: 450, margin: \"0 auto\" }}>\n      <div style={{ textAlign: \"center\", marginBottom: 24 }}>\n        <h2>Create Account</h2>\n        <p style={{ color: \"#666\" }}>Join the Resident Portal community</p>\n      </div>\n\n      <form onSubmit={handleSignup} style={{ display: \"grid\", gap: 12 }}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\n          <label style={labelStyle}>Full Name</label>\n          <input\n            style={inputStyle}\n            placeholder=\"John Doe\"\n            value={fullName}\n            onChange={(e) => setFullName(e.target.value)}\n            required\n            disabled={loading}\n          />\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\n          <label style={labelStyle}>Email Address</label>\n          <input\n            style={inputStyle}\n            placeholder=\"name@example.com\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n            disabled={loading}\n          />\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\n          <label style={labelStyle}>Password</label>\n          <input\n            style={inputStyle}\n            placeholder=\"••••••••\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n            disabled={loading}\n          />\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 4 }}>\n          <label style={labelStyle}>Select Your Role</label>\n          <select \n            style={inputStyle} \n            value={role} \n            onChange={(e) => setRole(e.target.value)}\n            disabled={loading}\n          >\n            <option value=\"RESIDENT\">Resident</option>\n            <option value=\"SELLER\">Seller (Marketplace)</option>\n            <option value=\"SECURITY\">Security</option>\n            <option value=\"WORKER\">Worker</option>\n          </select>\n        </div>\n\n        <button \n          type=\"submit\" \n          disabled={loading}\n          style={{\n            ...buttonStyle,\n            backgroundColor: loading ? \"#ccc\" : \"#007bff\",\n            cursor: loading ? \"not-allowed\" : \"pointer\"\n          }}\n        >\n          {loading ? \"Processing...\" : \"Sign Up\"}\n        </button>\n\n        <p style={{ textAlign: \"center\", marginTop: 16, fontSize: \"0.9rem\" }}>\n          Already have an account? <Link to=\"/login\" style={{ color: \"#007bff\", textDecoration: \"none\", fontWeight: \"bold\" }}>Login here</Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n\n// Styles\nconst labelStyle = {\n  fontSize: \"0.85rem\",\n  fontWeight: \"600\",\n  color: \"#444\",\n};\n\nconst inputStyle = {\n  padding: \"10px\",\n  borderRadius: \"6px\",\n  border: \"1px solid #ddd\",\n  fontSize: \"1rem\",\n};\n\nconst buttonStyle = {\n  padding: \"12px\",\n  color: \"#fff\",\n  border: \"none\",\n  borderRadius: \"6px\",\n  fontSize: \"1rem\",\n  fontWeight: \"bold\",\n  marginTop: \"10px\",\n  transition: \"background-color 0.2s\",\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}